\documentclass{article}

\usepackage{tikz}
\usetikzlibrary{arrows}
\begin{document}
\pagestyle{empty}


\tikzstyle{int}=[draw, fill=white!20, minimum size=1em]
\tikzstyle{init} = [pin edge={to-,thin,black}]
\tikzstyle{branch}=[fill,shape=circle,minimum size=3pt,inner sep=0pt]
\def\radius{.7mm}
\tikzstyle{s}=[shift={(0mm,\radius)}]

\hspace{-14em}
\begin{tikzpicture}[node distance=2.5cm,auto,>=latex']
    \node [int] (a) [align=left] {sound \\input};
    \node (b) [left of=a,node distance=1cm, coordinate] {a};

    \node [int] (c) [align=left, right of=a, node distance=3cm] {high pass \\filter};
    \node [coordinate] [right of=c, node distance=1cm]{};
    \node [int] (d) [align=left, right of=c] {squaring: \\signal ** 2};
    %\node [coordinate] [right of=d, node distance=1.75cm]{};
    \node [int] (e) [align=left, right of=d] {envelope \\follower};
    \node [int] (f) [align=left, right of=e] {trend \\subtraction};
    \node [int] (g) [align=left, right of=f] {half wave \\rectification};
    \node [int, pin={[init]above:\hspace{3.75cm}lo \hspace{0.25em}|\hspace{0.25em} hi |\hspace{0.5em} GUI laptop control}] (h) [align=left, right of=g] {threshold \\detection};
    \node [int] (i) [align=left, below of=h] {trigger};
    \node [int] (j) [align=left, below of=e] {Running \\max};
    \node [int] (k) [align=left, below of=j] {+};
    \node [int] (l) [align=left, below of=k, node distance=1.5cm] {trigger};
    \node [int] (m) [align=left, left of=l] {Running \\Max};
    \node [int] (n) [align=left, below of=c, node distance=8cm] {FFT:256};
    \node [int, pin={[init]below:\hspace{3.75cm}FBA threshold | \\GUI laptop control}] (o) [align=left, below of=d, node distance=8cm] {ODFT};
    \node [int] (p) [align=left, right of=l, node distance=7.5cm] {sample player*};

    %tmp
    \node [coordinate, right of=a, node distance=1.25cm] (tmp1){$H(s)$};
    \node [coordinate, below of=h, node distance=1.25cm] (tmp2){$H(s)$};
    \node [coordinate, left of=i] (tmp2f){$H(s)$};
    \node [coordinate, below of=f, node distance=1.25cm] (tmp3){$H(s)$};
    \node [coordinate, below of=g, node distance=1.25cm] (tmp4){$H(s)$};
    \node [coordinate, below of=tmp1, node distance=2.5cm] (tmp5){$H(s)$};%point under sum
    \node [coordinate, below of=tmp1, node distance=6.5cm] (tmp6){$H(s)$};%point under sum
    \node (tmp7) [below of=p,node distance=2cm, coordinate] {}; %2 point right sample player

    \path[->] (b) edge node {} (a);
    \path[->] (a) edge node {sum} (c);

    \draw [->] (tmp1) |- (j) {} (j);
    \draw [->] (tmp2) -| (j) {} (j);
    \draw [->] (k) -| (m) node[pos=0.4] {reset} (m);

    %\draw [->] (tmp5) -| (m) node[pos=0.4] {reset} (m);
    %\draw [->] (tmp1) |- (m) {} (m);


    \draw[-] (tmp1) node[branch] {}{ % from sum to bullet (down)
      \foreach \c in {tmp2} {
      }
    } |- (tmp5);

    \draw[->] (tmp5) node[branch] {}{ % from bullet (under sum to runn max)
      \foreach \c in {tmp5} {
      }
    } |- (m);

        \draw[->] (tmp6) node[branch] {}{ % from bullet (under sum to runn max)
      \foreach \c in {tmp6} {
      }
    } |- (n);

    \draw[->] (tmp4) node[branch] {}{ % bullet under half wave and jumping line to +
      \foreach \c in {tmp2f} {
        [shift only] -- ([s]\c -| tmp2f) arc(90:-90:\radius)
      }
    } |- (k);

    \draw[->] (c) edge node {} (d);
    \draw[->] (d) edge node {} (e);
    \draw[->] (e) edge node {} (f);
    \draw[->] (f) edge node {} (g);
    \draw[->] (g) edge node {} (h);
    \draw[->] (h) edge node {} (i);
    \draw[->] (j) edge node {} (i);
    \draw[->] (k) edge node {} (l);
    \draw[->] (m) edge node {} (l);
    \draw[->] (n) edge node {} (o);
    \draw [->] (o) -| (l) node[pos=0.4] {} (l);
    \draw[->] (l) edge node {} (p);
    \draw[->] (i) edge node {} (p);
    %\draw[->] (p) coordinate[pos=1.0] edge node {} (tmp7);
    % compute a point in the middle between E and NE or W and NW, then draw a line between these two
\path (tmp7.north) -- (p.south) coordinate[pos=0.36, xshift=0.8cm] (gh);
\path (p.south) -- (tmp7.north) coordinate[pos=0.0, xshift=0.8cm] (gh2);
\draw[latex-] (gh) -- (gh2);

\path (tmp7.north) -- (p.south) coordinate[pos=0.36, xshift=0.0cm] (gh);
\path (p.south west) -- (tmp7.north east) coordinate[pos=0.0, xshift=1.25cm] (gh2);
\draw[latex-] (gh) -- (gh2);






\end{tikzpicture}

\end{document}
